# Absences

This feature allows you to manage your members' absences and automatically deduct absent baskets from your deliveries. Your members can announce their absences directly from their member area. You can also add absences for your members as an admin ([Other > Absences](/absences)).

## Configuration {#configuration}

Once this additional feature is activated in [your settings](/settings#organization_features_input), [multiple settings](/settings#absence) are available.

## Billing {#billing}

By default, baskets marked as absent and not delivered are billed, and members are advised to find an acquaintance to collect their basket in their place. In [the settings](/settings#absence), you can also choose not to bill them. The system will then automatically [adjust the billing](/handbook/billing#price-change) of the membership.

## Basket Shifts {#basket-shift}

It is possible to shift the delivery of a basket during an absence to another delivery. This allows members to compensate for their absences without changing the number of baskets billed.

On the admin side, simply modify a basket marked as absent from the membership page and choose another delivery date. The basket content (including complements) will then be automatically shifted to the chosen basket.

On the member side, basket shifting is not possible by default. To activate this feature, you have the option to [modify the following settings](/settings#absence):

- **Number of allowed shifts**: to limit, if you wish, the number of shifts possible by members.
- **Deadline for shifts**: to limit, if you wish, the shifts possible in time.

If the absence is cancelled, the basket content will be automatically restored to its original delivery.

> Basket shifting is only possible for billable absences. Included absences (non-billable) cannot be shifted.

### Newsletter Template

When a basket has received shifts, you can display a reminder in your [newsletter templates](/newsletter_templates) using the `basket.shifted` and `basket.shifts` variables:

~~~ liquid
{% if basket.shifted %}
  {% highlight %}
    <p><strong>ðŸ“£ Important reminder!</strong></p>
    <p>You have <strong>{{ basket.quantity }} baskets</strong> to pick up this week:</p>
    <ul>
      <li>Your regular basket</li>
      {% for shift in basket.shifts %}
        <li>Basket shifted from {{ shift.old_delivery_date }}</li>
      {% endfor %}
    </ul>
  {% endhighlight %}
{% endif %}
~~~

## Included Absences {#absence-included}

It is possible to configure a number of absences included in the membership. These absences are then automatically deducted and not billed from the start of the membership. The system will provisionally mark the last deliveries of the membership as absent, while waiting for the member to fix these absences on specific dates. Additional absences will be billed or not according to the mode chosen in [your settings](/settings#absence).

> The number of included absences is set at the level of a [delivery cycle](/handbook/deliveries#delivery-cycles), in order to offer memberships with a number of included absences (and therefore deliveries) on [your registration form](<%= new_members_member_url(subdomain: Current.org.members_subdomain) %>).

### End-of-Year Mode {#absence-included-mode}

When members don't use all their included absences by the end of their membership, the remaining absences stay provisionally marked on the last deliveries. To handle this situation, you can configure an **end-of-year mode** in [the settings](/settings#absence):

**Provisional Absence Respected**

This is the default mode. Provisional absences will not be delivered. Members will receive a reminder email and can then choose to force a delivery from their account if they want to receive baskets that were marked as provisionally absent.

This mode is useful when you prefer that unused absences remain as absences by default, giving members the option to request delivery if needed.

**Delivery of Remaining Absences**

In this mode, unused included absences will have their delivery forced and billed at reminder time. Members receive a reminder email and can report an absence to opt out before the delivery happens and is billed.

This mode is useful when you prefer that members receive their baskets by default, avoiding the confusion of members showing up expecting a basket that wasn't prepared.

### Reminder Email {#absence-included-reminder}

A reminder email is sent to members with unused included absences a configurable number of weeks before the first provisional absence (default: 4 weeks). This gives members time to take action according to the chosen mode:

- **In "Provisional Absence Respected" mode**: Force a delivery if they want to receive baskets that were marked as provisionally absent.
- **In "Delivery of Remaining Absences" mode**: Report an absence to opt out of deliveries they don't want.
